(function(){"use strict";const C="";function d(s,e,t,n,o,l,c,y){var r=typeof s=="function"?s.options:s;e&&(r.render=e,r.staticRenderFns=t,r._compiled=!0),n&&(r.functional=!0),l&&(r._scopeId="data-v-"+l);var a;if(c?(a=function(i){i=i||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!i&&typeof __VUE_SSR_CONTEXT__<"u"&&(i=__VUE_SSR_CONTEXT__),o&&o.call(this,i),i&&i._registeredComponents&&i._registeredComponents.add(c)},r._ssrRegister=a):o&&(a=y?function(){o.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:o),a)if(r.functional){r._injectStyles=a;var v=r.render;r.render=function(b,h){return a.call(h),v(b,h)}}else{var u=r.beforeCreate;r.beforeCreate=u?[].concat(u,a):[a]}return{exports:s,options:r}}const f={props:{cache:Array,media:Array,other:Array},data(){return{dirs:{cache:Object.values(this.cache),media:Object.values(this.media),other:Object.values(this.other)}}},methods:{async clear(s,e=null){try{await this.$api.post("clear-cache",{type:s,dir:e})&&(e?this.dirs[s]=this.dirs[s].filter(n=>n.name!==e):this.dirs[s]=[],s==="other"&&e==="lock"&&this.$store.dispatch("content/clear"),this.$store.dispatch("notification/success",":)"))}catch(t){throw t}}}};var p=function(){var e=this,t=e._self._c;return t("k-panel-inside",[t("div",{staticClass:"k-clearcache-view"},[t("k-header",[e._v("Clear cache "),t("small",[e._v("[temporary files and directories]")])]),t("k-info-field",{attrs:{text:"The files and folders listed here are temporary. It is recreated when deleted. There is no harm in deleting it."}}),t("k-field",{attrs:{label:"Cache",help:"All cached parts of your website are stored here."},scopedSlots:e._u([Object.keys(e.dirs.cache).length?{key:"options",fn:function(){return[t("k-button-group",{staticClass:"k-field-options"},[t("k-button",{attrs:{icon:"check"},on:{click:function(n){return e.clear("cache")}}},[e._v(" Clear all ")])],1)]},proxy:!0}:null],null,!0)},[Object.keys(e.dirs.cache).length?[t("k-items",{attrs:{items:e.dirs.cache,link:!1,layout:"list",sortable:"false"},scopedSlots:e._u([{key:"options",fn:function({item:n}){return[t("k-button",{attrs:{icon:"trash"},on:{click:function(o){return e.clear("cache",n.name)}}})]}}],null,!1,3274965701)})]:t("k-empty",{attrs:{icon:"check"}},[e._v(" No temporary files/directories yet ")])],2),t("k-field",{attrs:{label:"Media",help:"The panel folder is created immediately when you enter the panel or refresh the page after deleting it. Usually the version is cleared when the Kirby version is updated."},scopedSlots:e._u([Object.keys(e.dirs.media).length?{key:"options",fn:function(){return[t("k-button-group",{staticClass:"k-field-options"},[t("k-button",{attrs:{icon:"check"},on:{click:function(n){return e.clear("media")}}},[e._v("Clear all")])],1)]},proxy:!0}:null],null,!0)},[Object.keys(e.dirs.media).length?t("k-items",{attrs:{items:e.dirs.media,link:!1,layout:"list",sortable:"false"},scopedSlots:e._u([{key:"options",fn:function({item:n}){return[t("k-button",{attrs:{icon:"trash"},on:{click:function(o){return e.clear("media",n.name)}}})]}}],null,!1,2784937005)}):t("k-empty",{attrs:{icon:"check"}},[e._v(" No temporary files/directories yet ")])],1),t("k-field",{attrs:{label:"Other",help:"Other temporary files/directories of your website."},scopedSlots:e._u([Object.keys(e.dirs.other).length?{key:"options",fn:function(){return[t("k-button-group",{staticClass:"k-field-options"},[t("k-button",{attrs:{icon:"check"},on:{click:function(n){return e.clear("other")}}},[e._v("Clear all")])],1)]},proxy:!0}:null],null,!0)},[Object.keys(e.dirs.other).length?[t("k-items",{attrs:{items:e.dirs.other,link:!1,layout:"list",sortable:"false"},scopedSlots:e._u([{key:"options",fn:function({item:n}){return[t("k-button",{attrs:{icon:"trash"},on:{click:function(o){return e.clear("other",n.name)}}})]}}],null,!1,3592532941)})]:t("k-empty",{attrs:{icon:"check"}},[e._v(" No temporary files/directories yet ")])],2)],1)])},k=[],_=d(f,p,k,!1,null,null,null,null);const m=_.exports;panel.plugin("owebstudio/clear-cache",{components:{clearcache:m}})})();
